import { Tab, Tabs } from 'nextra-theme-docs';
import { Callout } from 'nextra-theme-docs'

# Create file upload

<Callout type="info" emoji="ℹ️">
  Files that are uploaded to ROQ Platform are stored on [Scaleway Object Storage](https://www.scaleway.com/en/object-storage/). The data center is located in Paris. 
</Callout>

To upload file via API you need to proceed the following steps. Alternatively you can use ROQ's [File DropZone UI
component](/ui-components/file-dropzone).

1. Generate a signed URL using the `createFileUpload()` API
2. Upload file via the signed URL
3. Set status of the file using the `updateFileStatus()` API

## createFileUpload()

The `createFileUpload` API returns a "signed URL" which is then used to upload the file directly from the user's browser
to the object storage.

{/* TODO Replace code  */}

<Tabs items={['GraphQL']}><Tab>

```graphql
mutation createFileUpload($createFileDto: FileCreateDto!) {
  createFileUpload(createFileDto: $createFileDto) {
    id
    uploadUrl
    formFields
  }
}
```

</Tab></Tabs>

{/* TODO ADd curl command to upload a file */}

## updateFileStatus()

When the upload is finished, you need to set the status of the upload. This is needed because the file is uploaded 
directly to the object storage and therefore bypasses ROQ Platform.

<Tabs items={['GraphQL']}><Tab>

```graphql
mutation{
  updateFileStatus(
    fileId: "8f628084-7f6f-429b-9137-79620646a9be",
    status: READY
  ){
    id
    createdAt
    updatedAt
  }
}
```

</Tab></Tabs>
import { Callout } from 'nextra-theme-docs'
import { Tab, Tabs } from 'nextra-theme-docs';
import Image from 'next/image';

# ROQ Provider


<Tabs items={["React"]}>
<Tab>
##### Install the ROQ UI React npm module

    ``` npm install @roq/ui-react ```

    ##### Configure the ROQ Provider
    Insert the `<RoqProvider>` at a high-level component in your code. Typically this is an `App.tsx` or a layout component.
    The `<RoqProvider>` provides the configuration and context for the inner ROQ UI components to consume.
    It needs to be imported and used only once.

    If you are using the [`<Chat/>`](/ui-components/chat) UI Components, then also ensure to add the `<ChatProvider>` component
    at a suitable level of your code.


    ``` tsx
      import { RoqProvider, ChatProvider } from "@roq/ui-react";

      ...

      function MyApp() {
        return (
          <RoqProvider
            config={{
              // The host varies for different environments
              // You can get the host from your ROQ Console https://console.roq.tech
              host: "https://<your-environment-host>.roq-platform.com/v01/graphql"
              // The token is the ROQ auth token, generated for your user from your server-side at login
              // Ensure that this token is valid, and not expired
              token: "Your ROQ user authentication token"
              socket: true // Set to true if you use chat or notifications
            }}
          >
            <ChatProvider>
              {/* your app components */}
              {/* ROQ components can now be used anywhere inside this context */}
            </ChatProvider>
          </RoqProvider>
        );
      }

      ...
    ```

  </Tab>

</Tabs>

## Introduction

To use ROQ's UI Components, you need to wrap your React application into the RoqProvider component. This provider is
used for configuration and provides the required context to the other components.

First, you need to determine the right place to add the wrapper:

* **Pure React:** There is always an entry component, depending on your architecture approach.
* **Next.js:** If using Next.js, then it's recommended to use the App component as described
  here: https://nextjs.org/docs/advanced-features/custom-app

Then you need to import the `index.css`, which holds the styling of ROQâ€™s UI components, and wrap your application into
the `<RoqProvider />`

{/* TODO Replace with working code snippet */}

```tsx
import "rocomp/dist/index.css";

const getUserToken = () => query(api);

// ....

<RoqProvider
    config={{
        host: 'https://...',
        getToken: getUserToken,
        socket: true
    }}>
    ...
</RoqProvider>
```

There are multiple props and configuration parameters that can be set on the `RoqProvider` component:

| Prop                        | Type     | Description                                                                                                                                                                     |
|-----------------------------|----------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| `config`                    | object   | An object that sets the global config with the parameters explained below.                                                                                                      |
| `config:host`               | string   | Defines the URL of ROQ Platform. You can get this information from the console. Please note the hostname will be different for production and non-production environments.      |
| `config:getToken`           | function | Reference to a function that returns the user's token that enables the interaction with ROQ Platform. Alternatively, you can pass the token directly using the token parameter. |
| `config:socket?`            | boolean  | A boolean value must be true if a socket connection is established. This is required for notifications and chats. (default: false)                                              |
| `locale?`                   | string   | The locale prop is used to translate the component. Setting the same locale used in the current user's session is recommended.                                                  |
| `theme?`                    | string   | Currently selected theme. All components ship with a light and a dark theme (default: light)                                                                                    |
| `customTheme?`              | string   | You can change the styling of the component by injection as a custom theme like this:                                                                                           |
| `config:translationsTTL?`   | number   | Fetched translations are saved in the browser's local storage. This parameter lets you define the TTL in ms (default: 90000 ~ 15 minutes).                                      |
| `config:translationsCache?` | boolean  | Boolean value to disable the translation cache (default: `true`)                                                                                                                |
| `translate?`                | function | Custom translation function. You can read more about customizing translations here: Custom translations                                                                         |
| `onError?`                  | function | The callback function, which is called when an error happens                                                                                                                    |                                                                                                                                                                          |
